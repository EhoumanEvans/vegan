STATUS OF NEW ORDIPARSEFORMULA
==============================

KNOWN ISSUES

* Several terms within Condition(): FATAL

* scope: ordination functions cannot be embedded.

* Check corner cases of zero rows or columns.

* Check that output matrices have row names.

* Clean partial term labels: remove 'Condition(',')'.

* terms.expanded & ordiTerminfo IMPLEMENTATION DIFFER (but does this matter?)

TESTS

WARN: example(scores.cca) - In text.default(sco, labels = rownames(sco), ...) : 
  "length" is not a graphical parameter 

FAIL: example(add1.cca) 
  Error in unique.default(x[!is.na(x)]) : hash table is full 
  In addition: Warning message: 
  In Condition(Management + Moisture) : 
    Incompatible methods ("Ops.factor", "Ops.ordered") for "+"

OK:   example(cca)
OK:   example(dbrda)
OK:   example(predict.cca)
OK:   example(deviance.cca)
OK:   example(goodness.cca)
OK:   example(anova.cca)
OK:   example(RsquareAdj)
OK:   example(adonis)
OK:   example(biplot.rda)
OK:   example(eigenvals)
OK:   example(hatvalues.cca)
OK:   example(mso)
OK:   example(screeplot.cca)
OK:   example(simulate.rda)
OK:   example(tolerance)

R CMD check ERRORs, relevant NOTEs & WARNINGs

* checking examples ... ERROR
Running examples in ‘vegan-Ex.R’ failed
The error most likely occurred in:

> ### Name: add1.cca
...
> add1(m0, scope=formula(mbig), test="perm")
Warning in Condition(Management + Moisture) :
  Incompatible methods ("Ops.factor", "Ops.ordered") for "+"
Error in unique.default(x[!is.na(x)]) : hash table is full
Calls: add1 ... model.frame -> model.frame.default -> unique -> unique.default

--- COMMENT: Fails because Condition() has an expression of two variables

  Running ‘vegan-tests.R’
 ERROR
Running the tests in ‘tests/vegan-tests.R’ failed.
Last 13 lines of output:
  CCA4      1   0.18345 1.1464   0.83
  CCA5      1   0.08871 0.5544   0.97
  CCA6      1   0.06104 0.3815   0.89
  Residual  5   0.80011              
  > ### Check that constrained ordination functions can be embedded.
  > ### The data.frame 'df' is still attach()ed.
  > foo <- function(bar, Y, X, ...)
  + {
  +     bar <- match.fun(bar)
  +     bar(Y ~ X, ...)
  + }
  > foo("cca", dune, Management, na.action = na.omit)
  Error in eval(trms0[[2]]) : object 'Y' not found
  Calls: foo ... cca.formula -> ordiParseFormula -> as.matrix -> eval -> eval
  Execution halted

--- COMMENT: Fails because cannot be embedded.
